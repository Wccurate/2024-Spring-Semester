# Capture1 Example3 用Amdahl Law求解

## 方案1:更改所有浮点数（==FP==）的CPI

$Se=\frac{T_{改进部分改进前}}{T_{改进部分改进后}}=\frac{CPI_{原FP}}{CPI_{改进FP}}=2$

$Fe=\frac{T_{FP}}{T_{FP}+T_{other}}=\frac{CPI_{FP}\times FP\%}{CPI_{FP}\times FP\%+CPI_{other} \times other\%}=\frac{0.25 \times 4}{0.25 \times 4+0.75 \times 1.33}=0.5$

$S_1=\frac{1}{1-Fe+\frac{Fe}{Se}}=1.33$

## 方案2:更改浮点数开方（==FPSQR==）的CPI

$Se=\frac{T_{改进部分改进前}}{T_{改进部分改进后}}=\frac{CPI_{原FPSQR}}{CPI_{改进FPSQR}}=10$

$Fe=\frac{T_{FPSQR}}{T_{FPSQR}+T_{other}}=\frac{CPI_{FPSQR}\times FPSQR\%}{CPI_{FP}\times FP\%+CPI_{other} \times other\%}=\frac{0.02 \times 20}{0.25 \times 4+0.75 \times 1.33}=0.2$

$S_2=\frac{1}{1-Fe+\frac{Fe}{Se}}=1.21$

## ==结论==

可见$S_1 \textgreater S_2$，但是两者差别不是很大，如果对全部的浮点数操作进行优化的话可能会耗费很多的资金成本，但是如果单纯优化浮点数开方运算的话，既可以节约一些成本又可以取得还不错的加速比，这样看来优化浮点数开方运算更具性价比。